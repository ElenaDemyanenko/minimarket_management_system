# Система управления минимаркетом

## Описание проекта
Автоматизированная система управления для минимаркета, включающая:
- Управление товарами и запасами
- Оформление заказов и продажи
- Учёт покупателей и кассиров
- REST API для взаимодействия с системой

## Технологии
- Python 3.9+
- FastAPI
- SQLModel (SQLAlchemy + Pydantic)
- PostgreSQL

## Установка и запуск

Быстрый старт (с готовой тестовой базой)
Клонируйте репозиторий:
git clone https://github.com/ваш_логин/minimarket-management-system.git
cd minimarket-management-system

Установите зависимости:
pip install -r requirements.txt

Запустите сервер:
uvicorn main:app --reload

Откройте документацию API: http://localhost:8000/docs

## Настройка локальной базы данных

Установите PostgreSQL и создайте базу:
createdb minimarket

Выполните SQL-скрипты:
В DBeaver или другом клиенте:
\i Tables.sql   -- Создание таблиц
\i Data.sql     -- Тестовые данные (опционально)

Обновите настройки подключения в database.py

### Структура проекта
├── main.py              # Основной файл FastAPI приложения
├── models.py            # Модели данных SQLModel
├── requests.py          # Функции для работы с базой данных
├── database.py          # Настройки подключения к БД
├── requirements.txt     # Зависимости Python
├── Tables.sql           # SQL для создания таблиц
├── Data.sql             # SQL с тестовыми данными
└── README.md            # Документация

## Основные возможности API

### Управление товарами
- GET /products - список всех товаров
- GET /products/{product_id} - информация о конкретном товаре
- GET /products/category/{category} - товары по категории
- POST /products - добавление нового товара
- DELETE /products/{product_id} - удаление товара

### Работа с заказами
- GET /orders - все заказы
- GET /orders/{order_id} - информация о конкретном заказе
- POST /orders - создание заказа (сумма рассчитывается автоматически)
- PUT /orders/{order_id}/status - изменение статуса заказа
- PUT /orders/{order_id}/cancel - отмена заказа
- PUT /orders/{order_id}/complete - завершение заказа
- DELETE /orders/{order_id} - удаление заказа

### Управление покупателями
- GET /customers - список покупателей
- GET /customers/{customer_id} - информация о конкретном покупателе
- POST /customers - регистрация нового покупателя
- DELETE /customers/{customer_id} - удаление покупателя

### Работа с кассирами
- GET /cashiers - список кассиров
- GET /cashiers/{cashier_id} - информация о конкретном кассире
- POST /cashiers - добавление кассира
- DELETE /cashiers/{cashier_id} - удаление кассира

### Позиции заказа
- GET /order-items - список всех позиций заказов
- POST /order-items - добавление товара в заказ (сумма заказа пересчитывается автоматически)
- DELETE /order-items/{order_item_id} - удаление товара из заказа (сумма заказа пересчитывается автоматически)

### Дополнительные возможности
- GET /orders/{order_id}/items - получение всех товаров конкретного заказа
- GET /orders/status/{status} - фильтрация заказов по статусу
- GET /cashiers/shift/{shift} - фильтрация кассиров по смене
- GET /suppliers - список поставщиков
- GET /returns - список возвратов

## Примеры запросов

### Создание заказа с автоматическим расчётом суммы:

# 1.Создаём заказ (сумма будет 0):
POST /orders
{
  "customer_id": 1,
  "cashier_id": 1,
  "status": "new"
}

# 2.Добавляем товары (сумма пересчитывается автоматически):
POST /order-items
{
  "order_id": 1,
  "product_id": 1,
  "quantity": 2,
  "unit_price": 80.00
}
POST /order-items
{
  "order_id": 1,
  "product_id": 2,
  "quantity": 1,
  "unit_price": 45.00
}

# 3.Проверяем заказ - сумма стала 205.00 автоматически:
GET /orders/1

### Получение списка товаров:
GET /products

### Фильтрация товаров по категории:
GET /products/category/Молочные

## Документация API
После запуска сервера доступна автоматически сгенерированная документация:
Swagger UI: http://localhost:8000/docs
ReDoc: http://localhost:8000/redoc

## Особенности системы
- Автоматический расчёт сумм - система автоматически пересчитывает стоимость заказа при добавлении или удалении товаров
- Полный CRUD - для всех сущностей реализованы операции создания, чтения, обновления и удаления
- Валидация данных - строгая типизация и автоматическая проверка входных данных
- Готовая база данных - включает тестовые данные для быстрого старта

## Автор
Демьяненко Елена
Студент 4 курса бакалавриата
Направление: 09.03.02 "Информационные технологии в дизайне"
РГПУ им. А.И. Герцена, Санкт-Петербург, 2025

## Лицензия
Проект создан в учебных целях и разработан в рамках курсовой работы по дисциплине "Методы и средства проектирования информационных систем". Свободное использование и модификация разрешены с указанием авторства.